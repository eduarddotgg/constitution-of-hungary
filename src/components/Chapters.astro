---
import { getCollection } from "astro:content";
import ChapterLink from "./ChapterLink.astro";

const firstGroup = (await getCollection('chapter')).filter(item => !item.slug.startsWith('3') && !item.slug.startsWith('4') && !item.slug.startsWith('5') ).sort(
	(a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
);

const secondGroup = (await getCollection('chapter')).filter(item => item.slug.startsWith('3')).sort(
	(a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
);

const thirdGroup = (await getCollection('chapter')).filter(item => item.slug.startsWith('4')).sort(
	(a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
);

const fourthGroup = (await getCollection('chapter')).filter(item => item.slug.startsWith('5')).sort(
	(a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
);

const groups = {
	first: {
		title: null,
		chapters: firstGroup
	},
	second: {
		title: 'Az állam',
		chapters: secondGroup
	},
	third: {
		title: 'A különleges jogrend',
		chapters: thirdGroup
	},
	fourth: {
		title: null,
		chapters: fourthGroup
	}
}

---

<div class="py-144 min-h-680">

	<div class="flex flex-col gap-48">

		{
			Object.keys(groups).map((key) => (
				<div class="flex flex-col gap-12">
					<div class="w-full max-w-680 mx-auto">
						<h3 class="text-size-24 font-600 m-0">{groups[key].title}</h3>
					</div>

					<nav class="w-full max-w-680 mx-auto">
						<ul class="flex flex-col gap-12">
							{
								groups[key].chapters.map((chapter) => (
									<li>
										<ChapterLink href={`/chapter/${chapter.slug}/`}>
											<span>{chapter.data.title}</span>
										</ChapterLink>
									</li>
								))
							}
						</ul>
					</nav>
				</div>
			))
		}

		<!--<div class="flex flex-col gap-24">
			<nav class="w-full max-w-680 mx-auto">
				<ul class="flex flex-col gap-24">
					{
						firstGroup.map((chapter) => (
							<li>
								<ChapterLink href={`/chapter/${chapter.slug}/`}>
									<span>{chapter.data.title}</span>
								</ChapterLink>
							</li>
						))
					}
				</ul>
			</nav>
		</div>-->

		<!--<div class="flex flex-col gap-24">
			<nav class="w-full max-w-680 mx-auto">
				<ul class="flex flex-col gap-24">
					{
						secondGroup.map((chapter) => (
							<li>
								<ChapterLink href={`/chapter/${chapter.slug}/`}>
									<span>{chapter.data.title}</span>
								</ChapterLink>
							</li>
						))
					}
				</ul>
			</nav>
		</div>-->

		<!--<div class="flex flex-col gap-12">
			<div class="w-full max-w-680 mx-auto">
				<h3 class="text-size-24 font-600 m-0">Az állam</h3>
			</div>

			<nav class="w-full max-w-680 mx-auto">
				<ul class="flex flex-col gap-12">
					{
						thirdGroup.map((chapter) => (
							<li>
								<ChapterLink href={`/chapter/${chapter.slug}/`}>
									<span>{chapter.data.title}</span>
								</ChapterLink>
							</li>
						))
					}
				</ul>
			</nav>
		</div>-->

		<!--<div class="flex flex-col gap-12">
			<div class="w-full max-w-680 mx-auto">
				<h3 class="text-size-24 font-600 m-0">A különleges jogrend</h3>
			</div>

			<nav class="w-full max-w-680 mx-auto">
				<ul class="flex flex-col gap-12">
					{
						fourthGroup.map((chapter) => (
							<li>
								<ChapterLink href={`/chapter/${chapter.slug}/`}>
									<span>{chapter.data.title}</span>
								</ChapterLink>
							</li>
						))
					}
				</ul>
			</nav>
		</div>-->

		<!--<div class="flex flex-col gap-12">
			<nav class="w-full max-w-680 mx-auto">
				<ul class="flex flex-col gap-12">
					{
						fifthGroup.map((chapter) => (
							<li>
								<ChapterLink href={`/chapter/${chapter.slug}/`}>
									<span>{chapter.data.title}</span>
								</ChapterLink>
							</li>
						))
					}
				</ul>
			</nav>
		</div>-->
	</div>
</div>
